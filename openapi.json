{"swagger": "2.0", "info": {"title": "IYFFA API", "description": "API Documentation for IYFFA Website", "termsOfService": "https://www.iyffa.org/terms/", "contact": {"email": "contact@iyffa.org"}, "license": {"name": "BSD License"}, "version": "v1"}, "host": "localhost:8000", "schemes": ["http"], "basePath": "/api", "consumes": ["application/json"], "produces": ["application/json"], "securityDefinitions": {"Basic": {"type": "basic"}}, "security": [{"Basic": []}], "paths": {"/articles/": {"get": {"operationId": "articles_list", "description": "ViewSet for managing articles.\nPublic read access, authenticated write access.", "parameters": [], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/Article"}}}}, "tags": ["articles"]}, "post": {"operationId": "articles_create", "description": "Create article with user association", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Article"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/Article"}}}, "tags": ["articles"]}, "parameters": []}, "/articles/{id}/": {"get": {"operationId": "articles_read", "description": "ViewSet for managing articles.\nPublic read access, authenticated write access.", "parameters": [], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Article"}}}, "tags": ["articles"]}, "put": {"operationId": "articles_update", "description": "ViewSet for managing articles.\nPublic read access, authenticated write access.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Article"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Article"}}}, "tags": ["articles"]}, "patch": {"operationId": "articles_partial_update", "description": "ViewSet for managing articles.\nPublic read access, authenticated write access.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Article"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Article"}}}, "tags": ["articles"]}, "delete": {"operationId": "articles_delete", "description": "Delete an article", "parameters": [], "responses": {"204": {"description": ""}}, "tags": ["articles"]}, "parameters": [{"name": "id", "in": "path", "description": "A unique integer value identifying this article.", "required": true, "type": "integer"}]}, "/auth/2fa/disable/": {"post": {"operationId": "auth_2fa_disable_create", "description": "Disable 2FA for the current user", "parameters": [], "responses": {"201": {"description": ""}}, "tags": ["auth"]}, "parameters": []}, "/auth/2fa/enable/": {"post": {"operationId": "auth_2fa_enable_create", "description": "Enable 2FA and send verification code via email", "parameters": [], "responses": {"201": {"description": ""}}, "tags": ["auth"]}, "parameters": []}, "/auth/2fa/verify/": {"post": {"operationId": "auth_2fa_verify_create", "description": "Verify email OTP and complete 2FA setup", "parameters": [], "responses": {"201": {"description": ""}}, "tags": ["auth"]}, "parameters": []}, "/auth/login/": {"post": {"operationId": "auth_login_create", "description": "Authenticate user and handle 2FA", "parameters": [], "responses": {"201": {"description": ""}}, "tags": ["auth"]}, "parameters": []}, "/auth/token/refresh/": {"post": {"operationId": "auth_token_refresh_create", "description": "Takes a refresh type JSON web token and returns an access type JSON web\ntoken if the refresh token is valid.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/TokenRefresh"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/TokenRefresh"}}}, "tags": ["auth"]}, "parameters": []}, "/auth/verify-otp/": {"post": {"operationId": "auth_verify-otp_create", "description": "Verify email OTP and return JWT tokens if valid", "parameters": [], "responses": {"201": {"description": ""}}, "tags": ["auth"]}, "parameters": []}, "/cotisations/": {"get": {"operationId": "cotisations_list", "description": "ViewSet for managing user cotisations.\nRequires authentication for all operations.", "parameters": [], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/Cotisation"}}}}, "tags": ["cotisations"]}, "post": {"operationId": "cotisations_create", "description": "ViewSet for managing user cotisations.\nRequires authentication for all operations.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Cotisation"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/Cotisation"}}}, "tags": ["cotisations"]}, "parameters": []}, "/cotisations/{id}/": {"get": {"operationId": "cotisations_read", "description": "ViewSet for managing user cotisations.\nRequires authentication for all operations.", "parameters": [], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Cotisation"}}}, "tags": ["cotisations"]}, "put": {"operationId": "cotisations_update", "description": "ViewSet for managing user cotisations.\nRequires authentication for all operations.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Cotisation"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Cotisation"}}}, "tags": ["cotisations"]}, "patch": {"operationId": "cotisations_partial_update", "description": "ViewSet for managing user cotisations.\nRequires authentication for all operations.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Cotisation"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Cotisation"}}}, "tags": ["cotisations"]}, "delete": {"operationId": "cotisations_delete", "description": "ViewSet for managing user cotisations.\nRequires authentication for all operations.", "parameters": [], "responses": {"204": {"description": ""}}, "tags": ["cotisations"]}, "parameters": [{"name": "id", "in": "path", "description": "A unique integer value identifying this cotisation.", "required": true, "type": "integer"}]}, "/documents/": {"get": {"operationId": "documents_list", "description": "ViewSet for managing project documents.\nPublic read access, authenticated write access.", "parameters": [], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/Document"}}}}, "tags": ["documents"]}, "post": {"operationId": "documents_create", "description": "ViewSet for managing project documents.\nPublic read access, authenticated write access.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Document"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/Document"}}}, "tags": ["documents"]}, "parameters": []}, "/documents/{id}/": {"get": {"operationId": "documents_read", "description": "ViewSet for managing project documents.\nPublic read access, authenticated write access.", "parameters": [], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Document"}}}, "tags": ["documents"]}, "put": {"operationId": "documents_update", "description": "ViewSet for managing project documents.\nPublic read access, authenticated write access.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Document"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Document"}}}, "tags": ["documents"]}, "patch": {"operationId": "documents_partial_update", "description": "ViewSet for managing project documents.\nPublic read access, authenticated write access.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Document"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Document"}}}, "tags": ["documents"]}, "delete": {"operationId": "documents_delete", "description": "ViewSet for managing project documents.\nPublic read access, authenticated write access.", "parameters": [], "responses": {"204": {"description": ""}}, "tags": ["documents"]}, "parameters": [{"name": "id", "in": "path", "description": "A unique integer value identifying this document.", "required": true, "type": "integer"}]}, "/events/": {"get": {"operationId": "events_list", "description": "ViewSet for managing events.\nPublic read access, authenticated write access.\nHandles event creation with multiple images.", "parameters": [], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/Event"}}}}, "tags": ["events"]}, "post": {"operationId": "events_create", "description": "Create event with multiple images", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Event"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/Event"}}}, "tags": ["events"]}, "parameters": []}, "/events/{id}/": {"get": {"operationId": "events_read", "description": "ViewSet for managing events.\nPublic read access, authenticated write access.\nHandles event creation with multiple images.", "parameters": [], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Event"}}}, "tags": ["events"]}, "put": {"operationId": "events_update", "description": "Update event and its images", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Event"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Event"}}}, "tags": ["events"]}, "patch": {"operationId": "events_partial_update", "description": "ViewSet for managing events.\nPublic read access, authenticated write access.\nHandles event creation with multiple images.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Event"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Event"}}}, "tags": ["events"]}, "delete": {"operationId": "events_delete", "description": "Delete an event and its associated images", "parameters": [], "responses": {"204": {"description": ""}}, "tags": ["events"]}, "parameters": [{"name": "id", "in": "path", "description": "A unique integer value identifying this event.", "required": true, "type": "integer"}]}, "/events/{id}/delete_image/": {"delete": {"operationId": "events_delete_image", "description": "Delete a specific image from an event", "parameters": [], "responses": {"204": {"description": ""}}, "tags": ["events"]}, "parameters": [{"name": "id", "in": "path", "description": "A unique integer value identifying this event.", "required": true, "type": "integer"}]}, "/images/": {"get": {"operationId": "images_list", "description": "ViewSet for managing event images.\nPublic read access, authenticated write access.", "parameters": [], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/Image"}}}}, "tags": ["images"]}, "post": {"operationId": "images_create", "description": "Create a new image for an event", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Image"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/Image"}}}, "tags": ["images"]}, "parameters": []}, "/images/{id}/": {"get": {"operationId": "images_read", "description": "ViewSet for managing event images.\nPublic read access, authenticated write access.", "parameters": [], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Image"}}}, "tags": ["images"]}, "put": {"operationId": "images_update", "description": "ViewSet for managing event images.\nPublic read access, authenticated write access.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Image"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Image"}}}, "tags": ["images"]}, "patch": {"operationId": "images_partial_update", "description": "ViewSet for managing event images.\nPublic read access, authenticated write access.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Image"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Image"}}}, "tags": ["images"]}, "delete": {"operationId": "images_delete", "description": "ViewSet for managing event images.\nPublic read access, authenticated write access.", "parameters": [], "responses": {"204": {"description": ""}}, "tags": ["images"]}, "parameters": [{"name": "id", "in": "path", "description": "A unique integer value identifying this image.", "required": true, "type": "integer"}]}, "/payments/": {"get": {"operationId": "payments_list", "description": "ViewSet for managing payments.\nRequires authentication for all operations.", "parameters": [], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/Payment"}}}}, "tags": ["payments"]}, "post": {"operationId": "payments_create", "description": "ViewSet for managing payments.\nRequires authentication for all operations.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Payment"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/Payment"}}}, "tags": ["payments"]}, "parameters": []}, "/payments/{id}/": {"get": {"operationId": "payments_read", "description": "ViewSet for managing payments.\nRequires authentication for all operations.", "parameters": [], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Payment"}}}, "tags": ["payments"]}, "put": {"operationId": "payments_update", "description": "ViewSet for managing payments.\nRequires authentication for all operations.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Payment"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Payment"}}}, "tags": ["payments"]}, "patch": {"operationId": "payments_partial_update", "description": "ViewSet for managing payments.\nRequires authentication for all operations.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Payment"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Payment"}}}, "tags": ["payments"]}, "delete": {"operationId": "payments_delete", "description": "ViewSet for managing payments.\nRequires authentication for all operations.", "parameters": [], "responses": {"204": {"description": ""}}, "tags": ["payments"]}, "parameters": [{"name": "id", "in": "path", "description": "A unique integer value identifying this payment.", "required": true, "type": "integer"}]}, "/projects/": {"get": {"operationId": "projects_list", "description": "ViewSet for managing projects.\nPublic read access, authenticated write access.", "parameters": [], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/Project"}}}}, "tags": ["projects"]}, "post": {"operationId": "projects_create", "description": "ViewSet for managing projects.\nPublic read access, authenticated write access.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Project"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/Project"}}}, "tags": ["projects"]}, "parameters": []}, "/projects/{id}/": {"get": {"operationId": "projects_read", "description": "ViewSet for managing projects.\nPublic read access, authenticated write access.", "parameters": [], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Project"}}}, "tags": ["projects"]}, "put": {"operationId": "projects_update", "description": "ViewSet for managing projects.\nPublic read access, authenticated write access.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Project"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Project"}}}, "tags": ["projects"]}, "patch": {"operationId": "projects_partial_update", "description": "ViewSet for managing projects.\nPublic read access, authenticated write access.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Project"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Project"}}}, "tags": ["projects"]}, "delete": {"operationId": "projects_delete", "description": "ViewSet for managing projects.\nPublic read access, authenticated write access.", "parameters": [], "responses": {"204": {"description": ""}}, "tags": ["projects"]}, "parameters": [{"name": "id", "in": "path", "description": "A unique integer value identifying this project.", "required": true, "type": "integer"}]}, "/users/": {"get": {"operationId": "users_list", "description": "Liste tous les utilisateurs", "parameters": [], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/User"}}}, "401": {"description": "Non authentifié"}, "403": {"description": "Non autorisé"}}, "tags": ["users"]}, "post": {"operationId": "users_create", "description": "Crée un nouvel utilisateur", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/User"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/User"}}, "400": {"description": "Données invalides"}, "401": {"description": "Non authentifié"}, "403": {"description": "Non autorisé"}}, "tags": ["users"]}, "parameters": []}, "/users/dashboard_stats/": {"get": {"operationId": "users_dashboard_stats", "description": "Récupère les statistiques du tableau de bord", "parameters": [], "responses": {"200": {"description": "Statistiques du tableau de bord", "schema": {"type": "object", "properties": {"has_active_membership": {"type": "boolean"}, "error": {"type": "string"}, "message": {"type": "string"}}}}, "403": {"description": "Non autorisé"}}, "tags": ["users"]}, "parameters": []}, "/users/stats/": {"get": {"operationId": "users_stats", "description": "Récupère les statistiques du système", "parameters": [], "responses": {"200": {"description": "Statistiques du système", "schema": {"type": "object", "properties": {"total_users": {"type": "integer"}, "total_regular_users": {"type": "integer"}, "total_articles": {"type": "integer"}, "total_events": {"type": "integer"}, "total_projects": {"type": "integer"}}}}, "403": {"description": "Non autorisé"}}, "tags": ["users"]}, "parameters": []}, "/users/{id}/": {"get": {"operationId": "users_read", "description": "ViewSet for managing users.\nOnly accessible by admin users.\nProvides CRUD operations and statistics endpoint.\nDashboard stats accessible by members only.", "parameters": [], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/User"}}}, "tags": ["users"]}, "put": {"operationId": "users_update", "description": "Met à jour un utilisateur existant", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/User"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/User"}}, "400": {"description": "Données invalides"}, "401": {"description": "Non authentifié"}, "403": {"description": "Non autorisé"}, "404": {"description": "Utilisateur non trouvé"}}, "tags": ["users"]}, "patch": {"operationId": "users_partial_update", "description": "ViewSet for managing users.\nOnly accessible by admin users.\nProvides CRUD operations and statistics endpoint.\nDashboard stats accessible by members only.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/User"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/User"}}}, "tags": ["users"]}, "delete": {"operationId": "users_delete", "description": "Supprime un utilisateur", "parameters": [], "responses": {"204": {"description": "Suppression réussie"}, "401": {"description": "Non authentifié"}, "403": {"description": "Non autorisé"}, "404": {"description": "Utilisateur non trouvé"}}, "tags": ["users"]}, "parameters": [{"name": "id", "in": "path", "description": "A unique integer value identifying this user.", "required": true, "type": "integer"}]}}, "definitions": {"Article": {"required": ["title", "text"], "type": "object", "properties": {"id": {"title": "Id", "type": "integer", "readOnly": true}, "title": {"title": "Title", "type": "string", "maxLength": 255, "minLength": 1}, "text": {"title": "Text", "type": "string", "minLength": 1}, "creation_time": {"title": "Creation time", "type": "string", "format": "date-time", "readOnly": true}, "user_id": {"title": "User id", "type": "integer", "readOnly": true}, "author_name": {"title": "Author name", "type": "string", "readOnly": true}, "author_title": {"title": "Author title", "type": "string", "readOnly": true}, "formatted_date": {"title": "Formatted date", "type": "string", "readOnly": true}}}, "TokenRefresh": {"required": ["refresh"], "type": "object", "properties": {"refresh": {"title": "Refresh", "type": "string", "minLength": 1}, "access": {"title": "Access", "type": "string", "readOnly": true, "minLength": 1}}}, "Cotisation": {"required": ["type", "amount", "user_id"], "type": "object", "properties": {"id": {"title": "Id", "type": "integer", "readOnly": true}, "type": {"title": "Type", "type": "string", "maxLength": 45, "minLength": 1}, "amount": {"title": "Amount", "type": "number"}, "user_id": {"title": "User id", "type": "integer"}}}, "Document": {"required": ["url", "user_id"], "type": "object", "properties": {"id": {"title": "Id", "type": "integer", "readOnly": true}, "url": {"title": "Url", "type": "string", "maxLength": 255, "minLength": 1}, "user_id": {"title": "User id", "type": "integer"}}}, "Image": {"type": "object", "properties": {"id": {"title": "Id", "type": "integer", "readOnly": true}, "img_url": {"title": "Img url", "type": "string", "readOnly": true}, "position": {"title": "Position", "type": "integer", "maximum": 2147483647, "minimum": -2147483648}}}, "Event": {"required": ["title", "description", "start_datetime", "location", "price"], "type": "object", "properties": {"id": {"title": "Id", "type": "integer", "readOnly": true}, "title": {"title": "Title", "type": "string", "maxLength": 45, "minLength": 1}, "description": {"title": "Description", "type": "string", "minLength": 1}, "start_datetime": {"title": "Start datetime", "type": "string", "format": "date-time"}, "end_datetime": {"title": "End datetime", "type": "string", "format": "date-time", "x-nullable": true}, "location": {"title": "Location", "type": "string", "maxLength": 255, "minLength": 1}, "price": {"title": "Price", "type": "number"}, "user_id": {"title": "User id", "type": "integer", "readOnly": true}, "images": {"type": "array", "items": {"$ref": "#/definitions/Image"}, "readOnly": true}, "uploaded_images": {"type": "array", "items": {"type": "string", "readOnly": true, "format": "uri"}}, "image_positions": {"type": "array", "items": {"type": "integer"}}}}, "Payment": {"required": ["amount", "stripe_id", "status", "currency", "event_id", "cot_id"], "type": "object", "properties": {"id": {"title": "Id", "type": "integer", "readOnly": true}, "creation_time": {"title": "Creation time", "type": "string", "format": "date-time", "readOnly": true}, "amount": {"title": "Amount", "type": "number"}, "stripe_id": {"title": "Stripe id", "type": "integer", "maximum": 9223372036854775807, "minimum": -9223372036854775808}, "status": {"title": "Status", "type": "string", "maxLength": 45, "minLength": 1}, "currency": {"title": "Currency", "type": "string", "maxLength": 45, "minLength": 1}, "event_id": {"title": "Event id", "type": "integer"}, "cot_id": {"title": "Cot id", "type": "integer"}}}, "Project": {"required": ["title", "description", "budget", "user_id"], "type": "object", "properties": {"id": {"title": "Id", "type": "integer", "readOnly": true}, "title": {"title": "Title", "type": "string", "maxLength": 45, "minLength": 1}, "description": {"title": "Description", "type": "string", "minLength": 1}, "budget": {"title": "Budget", "type": "number"}, "user_id": {"title": "User id", "type": "integer"}}}, "User": {"required": ["email", "first_name", "last_name", "birthdate", "phone_number", "status", "cgu"], "type": "object", "properties": {"id": {"title": "ID", "type": "integer", "readOnly": true}, "email": {"title": "Email", "type": "string", "format": "email", "maxLength": 254, "minLength": 1}, "first_name": {"title": "First name", "type": "string", "maxLength": 150}, "last_name": {"title": "Last name", "type": "string", "maxLength": 150}, "birthdate": {"title": "Birthdate", "type": "string", "format": "date", "x-nullable": true}, "phone_number": {"title": "Phone number", "type": "string", "maxLength": 45, "minLength": 1, "x-nullable": true}, "user_type": {"title": "User type", "type": "string", "enum": ["admin", "user"]}, "status": {"title": "Status", "type": "boolean"}, "cgu": {"title": "Cgu", "type": "boolean"}, "stripe_id": {"title": "Stripe id", "type": "string", "readOnly": true, "minLength": 1, "x-nullable": true}, "otp_enabled": {"title": "Otp enabled", "type": "boolean"}, "date_joined": {"title": "Date joined", "type": "string", "format": "date-time", "readOnly": true}, "password": {"title": "Password", "type": "string", "minLength": 1}, "username": {"title": "Username", "type": "string", "minLength": 1}}}}}